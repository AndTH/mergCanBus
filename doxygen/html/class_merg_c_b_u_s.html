<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>mergCanBus: MergCBUS Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mergCanBus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_merg_c_b_u_s.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_merg_c_b_u_s-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MergCBUS Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_merg_c_b_u_s_8h_source.html">MergCBUS.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a0a55d90508366be555e232a7daa148d6"><td class="memItemLeft" align="right" valign="top">typedef unsigned int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a0a55d90508366be555e232a7daa148d6">userHandlerType</a> )(<a class="el" href="class_message.html">Message</a> *, <a class="el" href="class_merg_c_b_u_s.html">MergCBUS</a> *)</td></tr>
<tr class="separator:a0a55d90508366be555e232a7daa148d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa9af9b3b25cd2ad9ea7fbe78718c1c8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#aa9af9b3b25cd2ad9ea7fbe78718c1c8d">MergCBUS</a> ()</td></tr>
<tr class="memdesc:aa9af9b3b25cd2ad9ea7fbe78718c1c8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor Create the internal buffers. Initiate the memory management and transport object.  <a href="#aa9af9b3b25cd2ad9ea7fbe78718c1c8d">More...</a><br/></td></tr>
<tr class="separator:aa9af9b3b25cd2ad9ea7fbe78718c1c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a661a21ddc5ed6cf34a2f09eac06aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18a661a21ddc5ed6cf34a2f09eac06aa"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a18a661a21ddc5ed6cf34a2f09eac06aa">~MergCBUS</a> ()</td></tr>
<tr class="memdesc:a18a661a21ddc5ed6cf34a2f09eac06aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor Not used. <br/></td></tr>
<tr class="separator:a18a661a21ddc5ed6cf34a2f09eac06aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdd8a6d13ede3cd1d3e5c2ceacec901"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a0cdd8a6d13ede3cd1d3e5c2ceacec901">skipMessage</a> (message_type msg)</td></tr>
<tr class="memdesc:a0cdd8a6d13ede3cd1d3e5c2ceacec901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to skip processing certain message.  <a href="#a0cdd8a6d13ede3cd1d3e5c2ceacec901">More...</a><br/></td></tr>
<tr class="separator:a0cdd8a6d13ede3cd1d3e5c2ceacec901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01005f67536f6a496faa7f9b9a880a8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a01005f67536f6a496faa7f9b9a880a8b">processMessage</a> (message_type msg)</td></tr>
<tr class="memdesc:a01005f67536f6a496faa7f9b9a880a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to process certain message.  <a href="#a01005f67536f6a496faa7f9b9a880a8b">More...</a><br/></td></tr>
<tr class="separator:a01005f67536f6a496faa7f9b9a880a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef33771ca75cd9e4a39d46e90dbe01f0"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#aef33771ca75cd9e4a39d46e90dbe01f0">run</a> ()</td></tr>
<tr class="memdesc:aef33771ca75cd9e4a39d46e90dbe01f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method that deals with the majority of messages and behavior. Auto enummeration, query requests and config messages. If a custom function is set it calls it for every non automatic message.  <a href="#aef33771ca75cd9e4a39d46e90dbe01f0">More...</a><br/></td></tr>
<tr class="separator:aef33771ca75cd9e4a39d46e90dbe01f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa655ab9b67108bf407df80ba75abb585"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa655ab9b67108bf407df80ba75abb585"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>hasMessageToHandle</b> ()</td></tr>
<tr class="separator:aa655ab9b67108bf407df80ba75abb585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9fd48c454ca89033713418a1aab972a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_merg_node_identification.html">MergNodeIdentification</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#af9fd48c454ca89033713418a1aab972a">getNodeId</a> ()</td></tr>
<tr class="memdesc:af9fd48c454ca89033713418a1aab972a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to node identification.  <a href="#af9fd48c454ca89033713418a1aab972a">More...</a><br/></td></tr>
<tr class="separator:af9fd48c454ca89033713418a1aab972a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ee4cac6c607841d2fe0a151ba2eebc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92ee4cac6c607841d2fe0a151ba2eebc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>sendCanMessage</b> (<a class="el" href="class_c_a_n_message.html">CANMessage</a> *msg)</td></tr>
<tr class="separator:a92ee4cac6c607841d2fe0a151ba2eebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d3a659288d51c0906c39df1ad5ca9b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a17d3a659288d51c0906c39df1ad5ca9b">initCanBus</a> (unsigned int port, unsigned int rate, int retries, unsigned int retryIntervalMilliseconds)</td></tr>
<tr class="memdesc:a17d3a659288d51c0906c39df1ad5ca9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the port number for SPI communication. Set the CBUS rate and initiate the transport layer.  <a href="#a17d3a659288d51c0906c39df1ad5ca9b">More...</a><br/></td></tr>
<tr class="separator:a17d3a659288d51c0906c39df1ad5ca9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fca9209a4902005232a0e9e44aec543"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4fca9209a4902005232a0e9e44aec543"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a4fca9209a4902005232a0e9e44aec543">setUserHandlerFunction</a> (<a class="el" href="class_merg_c_b_u_s.html#a0a55d90508366be555e232a7daa148d6">userHandlerType</a> f)</td></tr>
<tr class="memdesc:a4fca9209a4902005232a0e9e44aec543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the user function to handle other messages. <br/></td></tr>
<tr class="separator:a4fca9209a4902005232a0e9e44aec543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff419a9ad712ff4cd5d0bdc9afcd077"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#adff419a9ad712ff4cd5d0bdc9afcd077">doSelfEnnumeration</a> (bool soft)</td></tr>
<tr class="memdesc:adff419a9ad712ff4cd5d0bdc9afcd077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate the auto enumeration procedure Start the timers and send a RTR message.  <a href="#adff419a9ad712ff4cd5d0bdc9afcd077">More...</a><br/></td></tr>
<tr class="separator:adff419a9ad712ff4cd5d0bdc9afcd077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0da4eb3df275b6b37bdf5cff96bceaa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0da4eb3df275b6b37bdf5cff96bceaa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#ad0da4eb3df275b6b37bdf5cff96bceaa">setDebug</a> (bool debug)</td></tr>
<tr class="memdesc:ad0da4eb3df275b6b37bdf5cff96bceaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put in debug mode. <br/></td></tr>
<tr class="separator:ad0da4eb3df275b6b37bdf5cff96bceaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f31e448aad866d9520732f71c10161"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31f31e448aad866d9520732f71c10161"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a31f31e448aad866d9520732f71c10161">doSetup</a> ()</td></tr>
<tr class="memdesc:a31f31e448aad866d9520732f71c10161"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put node in setup mode and send the Request Node Number RQNN It is the function that starts the changing from slim to flim. <br/></td></tr>
<tr class="separator:a31f31e448aad866d9520732f71c10161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3c4c92bc5ac0862d69b529494cd8ec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a3c4c92bc5ac0862d69b529494cd8ec"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a9a3c4c92bc5ac0862d69b529494cd8ec">doOutOfService</a> ()</td></tr>
<tr class="memdesc:a9a3c4c92bc5ac0862d69b529494cd8ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Node when going out of service. Send NNREL. <br/></td></tr>
<tr class="separator:a9a3c4c92bc5ac0862d69b529494cd8ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c4a666820ed63f2b574c75cc66482f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a08c4a666820ed63f2b574c75cc66482f">sendERRMessage</a> (byte code)</td></tr>
<tr class="memdesc:a08c4a666820ed63f2b574c75cc66482f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the error message with the code.  <a href="#a08c4a666820ed63f2b574c75cc66482f">More...</a><br/></td></tr>
<tr class="separator:a08c4a666820ed63f2b574c75cc66482f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4709ad58b084d3ae24018ce556d1fd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e4709ad58b084d3ae24018ce556d1fd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a7e4709ad58b084d3ae24018ce556d1fd">hasThisEvent</a> ()</td></tr>
<tr class="memdesc:a7e4709ad58b084d3ae24018ce556d1fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check it the received event is a learned event. For the messages ACONs,ACOFs,ASONs,ASOFs. Should be called after reading the can bus. <br/></td></tr>
<tr class="separator:a7e4709ad58b084d3ae24018ce556d1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b1e41c45ad28c5eb503399847b753b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a23b1e41c45ad28c5eb503399847b753b">readCanBus</a> ()</td></tr>
<tr class="memdesc:a23b1e41c45ad28c5eb503399847b753b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the can bus and load the data in the message object.  <a href="#a23b1e41c45ad28c5eb503399847b753b">More...</a><br/></td></tr>
<tr class="separator:a23b1e41c45ad28c5eb503399847b753b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df6a5ceac81ff3bc7fb9661f1c1b31e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9df6a5ceac81ff3bc7fb9661f1c1b31e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a9df6a5ceac81ff3bc7fb9661f1c1b31e">printSentMessage</a> ()</td></tr>
<tr class="memdesc:a9df6a5ceac81ff3bc7fb9661f1c1b31e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the message to be sent to serial. Used for debug. <br/></td></tr>
<tr class="separator:a9df6a5ceac81ff3bc7fb9661f1c1b31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2852310f99f764c6e30484a08baa41c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2852310f99f764c6e30484a08baa41c6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a2852310f99f764c6e30484a08baa41c6">printReceivedMessage</a> ()</td></tr>
<tr class="memdesc:a2852310f99f764c6e30484a08baa41c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the received message buffer to serial. Used for debug. <br/></td></tr>
<tr class="separator:a2852310f99f764c6e30484a08baa41c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51234206c9584f6c2b4b2b67f2fee2a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51234206c9584f6c2b4b2b67f2fee2a3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a51234206c9584f6c2b4b2b67f2fee2a3">setSlimMode</a> ()</td></tr>
<tr class="memdesc:a51234206c9584f6c2b4b2b67f2fee2a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the node to slim mode. <br/></td></tr>
<tr class="separator:a51234206c9584f6c2b4b2b67f2fee2a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343d837fcd1769ba000f69a72b7e8542"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a343d837fcd1769ba000f69a72b7e8542"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a343d837fcd1769ba000f69a72b7e8542">setFlimMode</a> ()</td></tr>
<tr class="memdesc:a343d837fcd1769ba000f69a72b7e8542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the node to flim mode. <br/></td></tr>
<tr class="separator:a343d837fcd1769ba000f69a72b7e8542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ae388f025b0f8ffd53d0040e74106f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a86ae388f025b0f8ffd53d0040e74106f"></a>
byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a86ae388f025b0f8ffd53d0040e74106f">getNodeMode</a> ()</td></tr>
<tr class="memdesc:a86ae388f025b0f8ffd53d0040e74106f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the node mode. <br/></td></tr>
<tr class="separator:a86ae388f025b0f8ffd53d0040e74106f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2ce0784f942cb091c9b02696010806"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d2ce0784f942cb091c9b02696010806"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a0d2ce0784f942cb091c9b02696010806">setUpNewMemory</a> ()</td></tr>
<tr class="memdesc:a0d2ce0784f942cb091c9b02696010806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new memory set up. Writes the EEPROM with null values. Equivalent to reset the memory. Should be done once before setting a new node. <br/></td></tr>
<tr class="separator:a0d2ce0784f942cb091c9b02696010806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70672a463667d7b44e639cbbee12ed21"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70672a463667d7b44e639cbbee12ed21"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a70672a463667d7b44e639cbbee12ed21">dumpMemory</a> ()</td></tr>
<tr class="memdesc:a70672a463667d7b44e639cbbee12ed21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print all EEPROM values. <br/></td></tr>
<tr class="separator:a70672a463667d7b44e639cbbee12ed21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3764ee3c7ccc005cdefb8914332abf20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a3764ee3c7ccc005cdefb8914332abf20">setLeds</a> (byte green, byte yellow)</td></tr>
<tr class="memdesc:a3764ee3c7ccc005cdefb8914332abf20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the pins for green and yello leds.  <a href="#a3764ee3c7ccc005cdefb8914332abf20">More...</a><br/></td></tr>
<tr class="separator:a3764ee3c7ccc005cdefb8914332abf20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a854551bf6d53b0b607fb87786b086b2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a854551bf6d53b0b607fb87786b086b2e">controlLeds</a> ()</td></tr>
<tr class="memdesc:a854551bf6d53b0b607fb87786b086b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do the automatic led control based on the node status. Called in the <a class="el" href="class_merg_c_b_u_s.html#aef33771ca75cd9e4a39d46e90dbe01f0" title="Method that deals with the majority of messages and behavior. Auto enummeration, query requests and c...">run()</a> function. If not using the.  <a href="#a854551bf6d53b0b607fb87786b086b2e">More...</a><br/></td></tr>
<tr class="separator:a854551bf6d53b0b607fb87786b086b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9be54d25863d445d682285624c2a64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f9be54d25863d445d682285624c2a64"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a5f9be54d25863d445d682285624c2a64">isSelfEnumMode</a> ()</td></tr>
<tr class="memdesc:a5f9be54d25863d445d682285624c2a64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the node is in self enumeration mode. <br/></td></tr>
<tr class="separator:a5f9be54d25863d445d682285624c2a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29798ba0455918d04fa61c3be1af8f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab29798ba0455918d04fa61c3be1af8f6"></a>
state&#160;</td><td class="memItemRight" valign="bottom"><b>getNodeState</b> ()</td></tr>
<tr class="separator:ab29798ba0455918d04fa61c3be1af8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ae87b2db898b55a8044c5cc2d2fad8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_merg_c_b_u_s.html#a63ae87b2db898b55a8044c5cc2d2fad8">setNodeState</a> (state newstate)</td></tr>
<tr class="memdesc:a63ae87b2db898b55a8044c5cc2d2fad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the node state to a new state.  <a href="#a63ae87b2db898b55a8044c5cc2d2fad8">More...</a><br/></td></tr>
<tr class="separator:a63ae87b2db898b55a8044c5cc2d2fad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A general class that support the <a class="el" href="class_merg_c_b_u_s.html">MergCBUS</a> protocol. The class is used to all operations regarding the protocol, but is flexible enough to allow you to use general can messages. It uses a modified version of <a class="el" href="mcp__can_8h_source.html">mcp_can.h</a>, that included the CAN header manipulation and RTR messages. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a0a55d90508366be555e232a7daa148d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned int(* MergCBUS::userHandlerType)(<a class="el" href="class_message.html">Message</a> *, <a class="el" href="class_merg_c_b_u_s.html">MergCBUS</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the user function for processing other messages. It receives a reference to a <a class="el" href="class_message.html">Message</a> and a reference to <a class="el" href="class_merg_c_b_u_s.html">MergCBUS</a>. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa9af9b3b25cd2ad9ea7fbe78718c1c8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MergCBUS::MergCBUS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor Create the internal buffers. Initiate the memory management and transport object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a854551bf6d53b0b607fb87786b086b2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::controlLeds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do the automatic led control based on the node status. Called in the <a class="el" href="class_merg_c_b_u_s.html#aef33771ca75cd9e4a39d46e90dbe01f0" title="Method that deals with the majority of messages and behavior. Auto enummeration, query requests and c...">run()</a> function. If not using the. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_merg_c_b_u_s.html#aef33771ca75cd9e4a39d46e90dbe01f0" title="Method that deals with the majority of messages and behavior. Auto enummeration, query requests and c...">run</a> then has to be called manually </dd></dl>

</div>
</div>
<a class="anchor" id="adff419a9ad712ff4cd5d0bdc9afcd077"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::doSelfEnnumeration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>softEnum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiate the auto enumeration procedure Start the timers and send a RTR message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">softEnum</td><td>True if the self ennumeration started by a software tool by receiving a ENUM message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af9fd48c454ca89033713418a1aab972a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_merg_node_identification.html">MergNodeIdentification</a>* MergCBUS::getNodeId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a reference to node identification. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_merg_node_identification.html">MergNodeIdentification</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a17d3a659288d51c0906c39df1ad5ca9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MergCBUS::initCanBus </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>retries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>retryIntervalMilliseconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the port number for SPI communication. Set the CBUS rate and initiate the transport layer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>is the the SPI port number. </td></tr>
    <tr><td class="paramname">rate</td><td>is the can bus rate. The values defined in the can transport layer are CAN_5KBPS 1 CAN_10KBPS 2 CAN_20KBPS 3 CAN_31K25BPS 4 CAN_40KBPS 5 CAN_50KBPS 6 CAN_80KBPS 7 CAN_100KBPS 8 CAN_125KBPS 9 CAN_200KBPS 10 CAN_250KBPS 11 CAN_500KBPS 12 CAN_1000KBPS 13 </td></tr>
    <tr><td class="paramname">retries</td><td>is the number of retries to configure the can bus </td></tr>
    <tr><td class="paramname">retryIntervalMilliseconds</td><td>is the delay in milliseconds between each retry. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a01005f67536f6a496faa7f9b9a880a8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::processMessage </td>
          <td>(</td>
          <td class="paramtype">message_type&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set to process certain message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td><a class="el" href="class_message.html">Message</a> type to process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a23b1e41c45ad28c5eb503399847b753b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MergCBUS::readCanBus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the can bus and load the data in the message object. </p>
<dl class="section return"><dt>Returns</dt><dd>true if a message in the can bus. </dd></dl>

</div>
</div>
<a class="anchor" id="aef33771ca75cd9e4a39d46e90dbe01f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int MergCBUS::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method that deals with the majority of messages and behavior. Auto enummeration, query requests and config messages. If a custom function is set it calls it for every non automatic message. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_merg_c_b_u_s.html#a4fca9209a4902005232a0e9e44aec543" title="Set the user function to handle other messages. ">setUserHandlerFunction</a> If the green and yellow leds are set ,it also control the standard their behaviour based on node state. </dd></dl>

</div>
</div>
<a class="anchor" id="a08c4a666820ed63f2b574c75cc66482f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::sendERRMessage </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the error message with the code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>can be: 1 Command Not Supported - see note 1. 2 Not In Learn Mode 3 Not in Setup Mode - see note 1 4 Too Many Events 5 Reserved 6 Invalid Event variable index 7 Invalid Event 8 Reserved - see note 2 9 Invalid Parameter Index 10 Invalid Node Variable Index 11 Invalid Event Variable Value 12 Invalid Node Variable Value</td></tr>
  </table>
  </dd>
</dl>
<p>Note 1: Accessory modules do not return this error Note 2: Currently used by code that processes OPC REVAL 0x9C but this code should be updated to use codes 6 &amp; 7. </p>

</div>
</div>
<a class="anchor" id="a3764ee3c7ccc005cdefb8914332abf20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::setLeds </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>green</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>yellow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the pins for green and yello leds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">green</td><td>Pin for the green led. </td></tr>
    <tr><td class="paramname">yellow</td><td>Pin for the yellow led. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a63ae87b2db898b55a8044c5cc2d2fad8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::setNodeState </td>
          <td>(</td>
          <td class="paramtype">state&#160;</td>
          <td class="paramname"><em>newstate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the node state to a new state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newstate</td><td>One of states </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd>state </dd></dl>

</div>
</div>
<a class="anchor" id="a0cdd8a6d13ede3cd1d3e5c2ceacec901"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MergCBUS::skipMessage </td>
          <td>(</td>
          <td class="paramtype">message_type&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set to skip processing certain message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td><a class="el" href="class_message.html">Message</a> type not to process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_merg_c_b_u_s_8h_source.html">MergCBUS.h</a></li>
<li>MergCBUS.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_merg_c_b_u_s.html">MergCBUS</a></li>
    <li class="footer">Generated on Mon Nov 10 2014 16:29:20 for mergCanBus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
